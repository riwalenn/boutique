{% extends 'base.html.twig' %}

{% block title %}Mon panier - La boutique{% endblock %}

{% block content %}
    <h1>Mon panier</h1>
    Retrouvez l'ensemble des produits que vous avez ajouté à votre panier.

    <table class="table table-sm table-hover align-middle">
        <thead>
        <tr>
            <th scope="col"></th>
            <th scope="col">Produit</th>
            <th scope="col">Quantité</th>
            <th scope="col">Prix</th>
            <th scope="col">Total</th>
        </tr>
        </thead>
        <tbody>
        {% set total = null %}
        {% for product in cart %}
        <tr>
            <td><img src="/uploads/{{ product.product.illustration }}" alt="{{ product.product.name }}" height="75px" /></td>
            <td>
                <p class="fs-5 fw-bold">{{ product.product.name }}</p>
                <p class="fs-6">{{ product.product.subtitle }}</p>
            </td>
            <td class="text-center">{{ product.quantity }}</td>
            <td class="text-center">{{ (product.product.price / 100)|number_format(2) ~ '€' }}</td>
            <td class="text-right">{{ ((product.quantity * product.product.price) / 100)|number_format(2) ~ '€' }}</td>
        </tr>
            {% set total = total + (product.quantity * product.product.price) %}
        {% endfor %}
        </tbody>
        <tfoot>
            <tr>
                <td colspan="3" class="text-right"></td>
                <td class="fs-6 fw-bold">Total</td>
                <td>{{ (total / 100)|number_format(2) ~ '€' }}</td>
            </tr>
        </tfoot>
    </table>

{% endblock %}
